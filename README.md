# Проектная работа "Веб-ларек"

Стек: HTML, SCSS, TS, Webpack

Структура проекта:
- src/ — исходные файлы проекта
- src/components/ — папка с JS компонентами
- src/components/base/ — папка с базовым кодом

Важные файлы:
- src/pages/index.html — HTML-файл главной страницы
- src/types/index.ts — файл с типами
- src/index.ts — точка входа приложения
- src/scss/styles.scss — корневой файл стилей
- src/utils/constants.ts — файл с константами
- src/utils/utils.ts — файл с утилитами

## Установка и запуск
Для установки и запуска проекта необходимо выполнить команды

```
npm install
npm run start
```

или

```
yarn
yarn start
```
## Сборка

```
npm run build
```

или

```
yarn build
```

Описание проекта  

Web-Larek — это веб-приложение, предназначенное для управления каталогом товаров, корзиной и оформлением заказов. Проект включает инструменты для динамической работы, чтобы пользователь мог посмотреть каталог товаров, добавить выбранные товары в корзину и оформить заказ.

Приложение реализовано по MVP архитектуре и состоит из классы моделей и классов представления.
В приложении используется событийно-ориентированный подход. 
Разделение по группам:

1. МОДЕЛИ (Model):
   - EventEmitter
   - ICard
   - ICardItem
   - IBasket
   - IBasketItem
   - IOrder
   - IOderResult
   - IAppState

2. ПРЕДСТАВЛЕНИЯ (View):
   - IBasketView
   - IPage
   - IPageElements
   - Modal
   - FormState

Взаимодействие между моделями и представлениями организуется с помощью событий через EventEmitter.

Основной функционал приложения 

Главная страница:
-На главной странице отображается список товаров, который загружается с сервера.  
-Счётчик на кнопке корзины отображает общее количество товаров, добавленных в корзину.  
-Два модельных окна с карточкой товара и окном корзины, которые закрываются по клику вне модального окна, по клику на крестик.

Карточка товара:
-Отображение полной информации
-В модальном окне при нажатии на кнопку «Купить» товар добавляется в корзину

Корзина:
- В модальном окне отображается список товаров, добавленных в корзину:  
  - Указаны названия товаров и их стоимость.  
  - При нажатии на кнопку удаления товар удаляется из корзины.  
  - После удаления автоматически обновля.тся cуммарная стоимость товаров и счётчик товаров на кнопке корзины.  
  - При нажатии на активную кнопку «Оформить» открывается модальное окно для выбора способа оплаты и адреса доставки.  

Оформление заказа:
-Выбор способа оплаты осуществляется нажатием на кнопку «Далее»
-Валидация формы

Завершение заказа:
-При нажатии на кнопку оплаты происходит отправка запроса на сервер.
-После успешного завершения запроса корзина очищается, сбрасывается, счётчик товаров на кнопке корзины, происходит переход на модальное окно, подтверждающее оформление заказа.

### Классы модели  
Классы модели (Model) отвечают за работу с данными и бизнес-логикой приложения.

---

#### Класс EventEmitter
   - Предназначение:  
     Обеспечивает работу с событиями приложения. Используется для передачи и обработки событий между компонентами.

   - Функции:  
     - Установка слушателей на события (on).  
     - Снятие слушателей с событий (off).  
     - Вызов слушателей при возникновении события (emit).
     
---

#### Интерфейс ICard
- Предназначение:  
  Описывает структуру карточки товара в каталоге.  

- Свойства:
  - id: string — уникальный идентификатор товара.  
  - title: string — название товара.  
  - description: string — описание продукта.  
  - image: string — URL изображения товара.  
  - category: CategoryType — категория карточки.  
  - price: number | null — цена товара или отсутствие цены.  
  - selected: boolean — статус выбранности товара.  

---

#### Тип ICardItem
- Предназначение:  
  Расширяет свойства карточки (ICard), добавляя информацию о состоянии товара.  

- Дополнительное свойство:
  - isOrdered: boolean — флаг, указывающий, что товар добавлен.  

---

#### Интерфейс IBasket
- Предназначение:  
  Представляет корзину товаров.  

- Свойства:
  - list: HTMLElement[] — массив элементов корзины.  
  - price: number — общая стоимость корзины.  

---

#### Тип IBasketItem
- Предназначение:  
  Отражает упрощенную структуру товара в корзине.  

- Свойства:
  - id: string — идентификатор товара.  
  - title: string — название.  
  - price: number — цена товара.  

---

#### Интерфейс IOrder
- Предназначение:   
    Отвечает за весь процесс оформления заказа, включая проверку правильности данных. 

 Функции:   
     - Сохранение информации о заказе (выбранные товары, адрес, способ оплаты).   
     - Проверка данных формы (валидация).   
     - Очистка корзины после завершения заказа. 

 - Свойства:   
     - payment: CashType — тип оплаты (наличные, карта или неопределённое состояние).   
     - address: string — адрес доставки.   
     - email: string — электронная почта клиента.   
     - phone: string — телефон клиента.   
     - items: string — список товаров, выбранных для заказа (например, идентификаторы в виде строки). 
---

#### Тип IOderResult
- Предназначение:  
  Результат оформления заказа.  

- Свойства:
  - id: string — идентификатор заказа.  
  - total: number — общая сумма заказа.  

---

#### Интерфейс IAppState
- Предназначение:  
  Содержит текущее состояние приложения.  

- Свойства:
  - catalog: ICardItem[] — каталог товаров.  
  - basket: ICardItem[] — корзина товаров.  
  - order: IOrder — текущий заказ.  
  - orderResponse: IOderResult | null — результат заказа.  
  - preview: ICardItem — предварительно выбранный товар.  

- Функции:
  - isLotInBasket(item: ICardItem): boolean — проверяет, находится ли товар в корзине.  
  - clearBasket(): void — полностью очищает корзину.  
  - getTotalAmount(): number — возвращает общую стоимость товаров в корзине.  
  - getBasketIds(): number — возвращает массив идентификаторов товаров в корзине.  
  - getBasketLength(): number — возвращает количество товаров в корзине.  
  - initOrder(): IOrder — инициализирует новый заказ.  
  - openModal(content: HTMLElement): void — отображает модальное окно с указанным содержанием.  
  - closeModal(): void — закрывает текущее модальное окно.  
  - setContent(content: HTMLElement): void — обновляет содержимое модального окна.  

---

### Классы представления  
Классы представления (View) управляют графическим слоем и взаимодействием с пользователем.

---

#### Интерфейс IBasketView
- Предназначение:  
  Управляет представлением корзины товаров.  

- Свойства:
  - items: HTMLElement[] — массив DOM-элементов товаров.  
  - price: number — общая сумма покупок.  
  - selected: string[] — массив идентификаторов выбранных товаров.  

---

#### Интерфейс IPage
- Предназначение:  
  Описывает состояние страницы.  

- Свойства:
- counter: number — счетчик товаров.  
  - store: HTMLElement[] — массив отображаемых товаров.  
  - locked: boolean — статус блокировки страницы.  

---

#### Интерфейс IPageElements
- Предназначение:  
  Отражает элементы страницы, с которыми ведется работа.  

- Свойства:
  - counter: HTMLElement — DOM-элемент для отображения счетчика.  
  - wrapper: HTMLElement — обертка для контента страницы.  
  - basket: HTMLElement — DOM-элемент для корзины.  
  - store: HTMLElement — DOM-элемент для каталога товаров.  

---

#### Тип Modal
- Предназначение:  
  Представляет модальное окно.  

- Свойства:
  - content: HTMLElement — содержимое модального окна.  

---

#### Тип FormState
- Предназначение:  
  Состояние формы, включая валидацию данных.  

- Свойства:
  - valid: boolean — состояние валидности формы.  
  - errors: string[] — массив ошибок.  

---